@{
    ViewData["Title"] = "Home";
}

<!-- Hero Section with Featured Movie -->
<section class="pb-0">
    <div class="card bg-dark text-white overflow-hidden" style="min-height: 400px;">
        @if (ViewBag.FeaturedMovie != null)
        {
            var featuredMovie = (MVC_PRJ_F.Models.Movie)ViewBag.FeaturedMovie;
            @if (!string.IsNullOrEmpty(featuredMovie.MainImage))
            {
                <img class="card-img" src="~/images/MovieImage/@featuredMovie.MainImage" alt="@featuredMovie.Title" style="height: 400px; object-fit: cover; opacity: 0.5;" />
            }
            else
            {
                <img class="card-img" src="~/assets/img/generic/cinema-hero.jpg" alt="Featured Movie" style="height: 400px; object-fit: cover; opacity: 0.5;" />
            }
            <div class="card-img-overlay d-flex align-items-center">
                <div>
                    <h5 class="fs-3 fs-md-4 text-white">Now Showing</h5>
                    <h1 class="display-3 fw-bold text-white mb-3">@featuredMovie.Title</h1>
                    <p class="lead text-white mb-4">@(featuredMovie.Description?.Length > 100 ? featuredMovie.Description.Substring(0, 100) + "..." : featuredMovie.Description)</p>
                    <div>
                        <a class="btn btn-lg btn-primary me-2" asp-controller="Movie" asp-action="GetById" asp-route-id="@featuredMovie.Id">
                            <span class="fas fa-ticket-alt me-2"></span>Book Now
                        </a>
                        <a class="btn btn-lg btn-outline-light" href="#movies">
                            <span class="fas fa-film me-2"></span>View All Movies
                        </a>
                    </div>
                </div>
            </div>
        }
        else
        {
            <img class="card-img" src="~/assets/img/generic/cinema-hero.jpg" alt="Featured Movie" style="height: 400px; object-fit: cover; opacity: 0.5;" />
            <div class="card-img-overlay d-flex align-items-center">
                <div>
                    <h5 class="fs-3 fs-md-4 text-white">Welcome to Cinema</h5>
                    <h1 class="display-3 fw-bold text-white mb-3">Experience Cinema Like Never Before</h1>
                    <p class="lead text-white mb-4">Book your tickets now and enjoy the latest blockbusters!</p>
                    <div>
                        <a class="btn btn-lg btn-primary me-2" href="#movies">
                            <span class="fas fa-ticket-alt me-2"></span>Book Now
                        </a>
                        <a class="btn btn-lg btn-outline-light" asp-controller="Movie" asp-action="Index">
                            <span class="fas fa-film me-2"></span>View All Movies
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
</section>

<!-- Quick Stats -->
<section class="py-4">
    <div class="row g-3">
        <div class="col-md-3 col-sm-6">
            <div class="card h-100 bg-gradient-primary text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-white mb-1">Total Movies</h6>
                            <h2 class="mb-0 text-white">@ViewBag.TotalMovies</h2>
                        </div>
                        <div class="fs-4">
                            <svg class="svg-inline--fa fa-film fa-w-16" style="color: white;" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="film" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="card h-100 bg-gradient-success text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-white mb-1">Active Cinemas</h6>
                            <h2 class="mb-0 text-white">@ViewBag.ActiveCinemas</h2>
                        </div>
                        <div class="fs-4">
                            <svg class="svg-inline--fa fa-building fa-w-14" style="color: white;" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="building" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                <path fill="currentColor" d="M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="card h-100 bg-gradient-warning text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-white mb-1">Today's Shows</h6>
                            <h2 class="mb-0 text-white">@ViewBag.TodayShows</h2>
                        </div>
                        <div class="fs-4">
                            <svg class="svg-inline--fa fa-calendar-day fa-w-14" style="color: white;" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar-day" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                <path fill="currentColor" d="M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm64-192c0-8.8 7.2-16 16-16h96c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-96zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="card h-100 bg-gradient-info text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-white mb-1">Tickets Sold</h6>
                            <h2 class="mb-0 text-white">@ViewBag.TicketsSold</h2>
                        </div>
                        <div class="fs-4">
                            <svg class="svg-inline--fa fa-ticket-alt fa-w-18" style="color: white;" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="ticket-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                <path fill="currentColor" d="M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Now Showing Movies -->
<section class="py-4" id="movies">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
                <span class="fas fa-fire text-danger me-2"></span>Now Showing
            </h5>
            <a class="btn btn-sm btn-falcon-default" asp-controller="Movie" asp-action="Index">
                View All <span class="fas fa-arrow-right ms-1"></span>
            </a>
        </div>
        <div class="card-body">
            <div class="row g-3">
                @if (ViewBag.FeaturedMovies != null && ((List<MVC_PRJ_F.Models.Movie>)ViewBag.FeaturedMovies).Any())
                {
                    @foreach (var movie in (List<MVC_PRJ_F.Models.Movie>)ViewBag.FeaturedMovies)
                    {
                        <div class="col-lg-3 col-md-4 col-sm-6">
                            <div class="card h-100 overflow-hidden">
                                <div class="position-relative">
                                    @if (!string.IsNullOrEmpty(movie.MainImage))
                                    {
                                        <img class="card-img-top" src="~/images/MovieImage/@movie.MainImage" alt="@movie.Title" style="height: 350px; object-fit: cover;" />
                                    }
                                    else
                                    {
                                        <img class="card-img-top" src="~/assets/img/generic/movie-1.jpg" alt="@movie.Title" style="height: 350px; object-fit: cover;" />
                                    }
                                    <span class="badge bg-danger position-absolute top-0 end-0 m-2">NOW</span>
                                </div>
                                <div class="card-body">
                                    <h6 class="mb-2">@movie.Title</h6>
                                    <div class="d-flex align-items-center mb-2">
                                        <span class="fas fa-star text-warning me-1"></span>
                                        <span class="fw-semi-bold">@movie.DateTime.ToString("MMM dd")</span>
                                        @if (movie.Categories != null && movie.Categories.Any())
                                        {
                                            <span class="text-600 ms-2">@string.Join(", ", movie.Categories.Where(mc => mc.Category != null).Select(mc => mc.Category.Name).Distinct())</span>
                                        }
                                    </div>
                                    <p class="fs-11 text-600 mb-3">@(movie.Description?.Length > 50 ? movie.Description.Substring(0, 50) + "..." : movie.Description)</p>
                                    <a class="btn btn-sm btn-primary w-100" asp-controller="Movie" asp-action="GetById" asp-route-id="@movie.Id">
                                        <span class="fas fa-ticket-alt me-1"></span>Book Tickets
                                    </a>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="col-12">
                        <div class="alert alert-info text-center">
                            <p class="mb-0">No movies available at the moment. Check back later!</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- Coming Soon -->
<section class="py-4">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
                <span class="fas fa-calendar-plus text-primary me-2"></span>Coming Soon
            </h5>
            <a class="btn btn-sm btn-falcon-default" href="#">
                View All <span class="fas fa-arrow-right ms-1"></span>
            </a>
        </div>
        <div class="card-body">
            <div class="row g-3">
                @if (ViewBag.ComingSoonMovies != null && ((List<MVC_PRJ_F.Models.Movie>)ViewBag.ComingSoonMovies).Any())
                {
                    @foreach (var movie in (List<MVC_PRJ_F.Models.Movie>)ViewBag.ComingSoonMovies)
                    {
                        <div class="col-md-6">
                            <div class="card bg-light">
                                <div class="row g-0">
                                    <div class="col-4">
                                        @if (!string.IsNullOrEmpty(movie.MainImage))
                                        {
                                            <img src="~/images/MovieImage/@movie.MainImage" class="img-fluid rounded-start h-100" alt="@movie.Title" style="object-fit: cover;" />
                                        }
                                        else
                                        {
                                            <img src="~/assets/img/generic/coming-1.jpg" class="img-fluid rounded-start h-100" alt="@movie.Title" style="object-fit: cover;" />
                                        }
                                    </div>
                                    <div class="col-8">
                                        <div class="card-body">
                                            <span class="badge bg-primary mb-2">Releasing @movie.DateTime.ToString("MMM dd, yyyy")</span>
                                            <h5 class="card-title">@movie.Title</h5>
                                            <p class="card-text text-600 fs-11">@(movie.Description?.Length > 80 ? movie.Description.Substring(0, 80) + "..." : movie.Description)</p>
                                            @if (movie.Categories != null && movie.Categories.Any())
                                            {
                                                <div class="mb-2">
                                                    @foreach (var cat in movie.Categories.Where(c => c.Category != null).Take(2))
                                                    {
                                                        <span class="badge bg-secondary me-1">@cat.Category.Name</span>
                                                    }
                                                </div>
                                            }
                                            <a class="btn btn-sm btn-outline-primary" asp-controller="Movie" asp-action="GetById" asp-route-id="@movie.Id">
                                                <span class="fas fa-bell me-1"></span>View Details
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="col-12">
                        <div class="alert alert-info text-center">
                            <p class="mb-0">No upcoming movies scheduled at the moment.</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- Featured Cinemas -->
<section class="py-4">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
                <span class="fas fa-map-marker-alt text-success me-2"></span>Featured Cinemas Near You
            </h5>
            <a class="btn btn-sm btn-falcon-default" asp-controller="Cinema" asp-action="Index">
                View All <span class="fas fa-arrow-right ms-1"></span>
            </a>
        </div>
        <div class="card-body">
            <div class="row g-3">
                @if (ViewBag.FeaturedCinemas != null && ((List<MVC_PRJ_F.Models.Cinema>)ViewBag.FeaturedCinemas).Any())
                {
                    @foreach (var cinema in (List<MVC_PRJ_F.Models.Cinema>)ViewBag.FeaturedCinemas)
                    {
                        <div class="col-md-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="d-flex align-items-start mb-3">
                                        <div class="avatar avatar-3xl">
                                            @if (!string.IsNullOrEmpty(cinema.Image))
                                            {
                                                <img class="rounded" src="~/images/CinemaImage/@cinema.Image" alt="@cinema.Name" />
                                            }
                                            else
                                            {
                                                <img class="rounded" src="~/assets/img/icons/cinema-icon.png" alt="@cinema.Name" />
                                            }
                                        </div>
                                        <div class="ms-3">
                                            <h6 class="mb-1">@cinema.Name</h6>
                                            <p class="fs-11 text-600 mb-2">
                                                <span class="fas fa-map-marker-alt me-1"></span>@cinema.City, @cinema.Country
                                            </p>
                                            @if (cinema.Halls != null && cinema.Halls.Any())
                                            {
                                                <div>
                                                    <span class="badge bg-soft-success text-success me-1">@cinema.Halls.Count Halls</span>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                    <p class="text-600 fs-11 mb-2">
                                        <span class="fas fa-phone me-1"></span>@cinema.Phone
                                    </p>
                                    <p class="text-600 fs-11 mb-3">@cinema.Address</p>
                                    <a class="btn btn-sm btn-falcon-default w-100" asp-controller="Cinema" asp-action="GetById" asp-route-id="@cinema.Id">View Showtimes</a>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="col-12">
                        <div class="alert alert-info text-center">
                            <p class="mb-0">No cinemas available at the moment.</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- Special Offers -->
<section class="py-4">
    <div class="row g-3">
        <div class="col-md-6">
            <div class="card bg-gradient-primary text-white h-100">
                <div class="card-body">
                    <h4 class="text-white mb-3">
                        <span class="fas fa-gift me-2"></span>Weekend Special
                    </h4>
                    <h2 class="text-white mb-2">50% OFF</h2>
                    <p class="text-white mb-3">Book any movie tickets for weekend shows and get 50% discount!</p>
                    <button class="btn btn-light">
                        <span class="fas fa-tag me-2"></span>Claim Offer
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card bg-gradient-warning text-white h-100">
                <div class="card-body">
                    <h4 class="text-white mb-3">
                        <span class="fas fa-users me-2"></span>Group Booking
                    </h4>
                    <h2 class="text-white mb-2">Buy 4 Get 1 Free</h2>
                    <p class="text-white mb-3">Perfect for friends and family! Book 4 tickets and get 1 absolutely free.</p>
                    <button class="btn btn-light">
                        <span class="fas fa-ticket-alt me-2"></span>Book Now
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Add any page-specific JavaScript here
        console.log('Cinema Home Page Loaded');
    </script>
}